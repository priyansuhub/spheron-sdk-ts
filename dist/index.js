var t=require("axios"),e=require("uuid"),r=require("form-data"),n=require("fs");function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i=/*#__PURE__*/o(t),a=/*#__PURE__*/o(r),u=/*#__PURE__*/o(n);function s(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,c(t,e)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function m(t,e){try{var r=t()}catch(t){return e(t)}return r&&r.then?r.then(void 0,e):r}var p=/*#__PURE__*/function(){function t(t){this.apiKey=void 0,this.baseUrl=void 0,this.apiKey="Bearer "+t,this.baseUrl="https://api-v2.spheron.network"}var e=t.prototype;return e.patchData=function(t,e){try{var r=this;return Promise.resolve(m(function(){return Promise.resolve(i.default.patch(""+r.baseUrl+t,e,{headers:{accept:"application/json",charset:"utf-8",authorization:r.apiKey}})).then(function(t){return t.data})},function(t){return t.response.data}))}catch(t){return Promise.reject(t)}},e.putData=function(t,e){try{var r=this;return Promise.resolve(m(function(){return Promise.resolve(i.default.put(""+r.baseUrl+t,e,{headers:{accept:"application/json",charset:"utf-8",authorization:r.apiKey}})).then(function(t){return t.data})},function(t){return t.response.data}))}catch(t){return Promise.reject(t)}},e.postData=function(t,e){try{var r=this;return Promise.resolve(m(function(){return Promise.resolve(i.default.post(""+r.baseUrl+t,e,{headers:{accept:"application/json",charset:"utf-8",authorization:r.apiKey}})).then(function(t){return t.data})},function(t){return t.response.data}))}catch(t){return Promise.reject(t)}},e.deleteDataParam=function(t,e){try{var r=this;return Promise.resolve(m(function(){return Promise.resolve(i.default.delete(""+r.baseUrl+t,{headers:{accept:"application/json",charset:"utf-8",authorization:r.apiKey},data:{userId:e}})).then(function(t){return t.data})},function(t){return t.message}))}catch(t){return Promise.reject(t)}},e.deleteData=function(t){try{var e=this;return Promise.resolve(m(function(){return Promise.resolve(i.default.delete(""+e.baseUrl+t,{headers:{accept:"application/json",charset:"utf-8",authorization:e.apiKey}})).then(function(t){return t.data})},function(t){return t.response.data}))}catch(t){return Promise.reject(t)}},e.getData=function(t){try{var e=this;return Promise.resolve(m(function(){return Promise.resolve(i.default.get(""+e.baseUrl+t,{headers:{accept:"application/json",charset:"utf-8",authorization:e.apiKey}})).then(function(t){return t.data})},function(t){return t.message}))}catch(t){return Promise.reject(t)}},e.postDataUpload=function(t,e){try{var r=this;return Promise.resolve(m(function(){return Promise.resolve(i.default.post(""+r.baseUrl+t,e,{headers:{authorization:r.apiKey}})).then(function(t){return t.data})},function(t){return t.message}))}catch(t){return Promise.reject(t)}},e.getDataParam=function(t){try{var e=this;return Promise.resolve(m(function(){return Promise.resolve(i.default.post(""+e.baseUrl+t,{headers:{accept:"application/json",charset:"utf-8",authorization:e.apiKey}})).then(function(t){return t.data})},function(t){return t.message}))}catch(t){return Promise.reject(t)}},t}(),h=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}s(e,t);var r=e.prototype;return r.getDomain=function(t){try{return Promise.resolve(this.getData("/v1/project/"+t+"/domains"))}catch(t){return Promise.reject(t)}},r.getDomainByDomainId=function(t,e){try{return Promise.resolve(this.getData("/v1/project/"+t+"/domains/"+e))}catch(t){return Promise.reject(t)}},r.addDomainByProjectId=function(t,e){try{return Promise.resolve(this.postData("/v1/project/"+t+"/domains",e))}catch(t){return Promise.reject(t)}},r.updateDomainByDomainId=function(t,e,r){try{return Promise.resolve(this.patchData("/v1/project/"+t+"/domains/"+e,r))}catch(t){return Promise.reject(t)}},r.deleteDomainByDomainId=function(t,e){try{return Promise.resolve(this.deleteData("/v1/project/"+t+"/domains/"+e))}catch(t){return Promise.reject(t)}},r.verifyDomainByProjectId=function(t,e){try{return Promise.resolve(this.patchData("/v1/project/"+t+"/domains/"+e+"/verify",null))}catch(t){return Promise.reject(t)}},e}(p),f=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e.prototype.getCouponDetails=function(t){try{return Promise.resolve(this.getData("/v1/organization/"+t+"/coupons"))}catch(t){return Promise.reject(t)}},e}(p);function v(t,e,r){for(var n,o=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}(t))){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(u.default.readdirSync(t));!(n=o()).done;){var i=n.value,a=t+"/"+i,s=e+i;u.default.statSync(a).isDirectory()?v(a,s+"/",r):r.append("files",u.default.createReadStream(a),{filepath:s})}}var y=/*#__PURE__*/function(t){function r(){return t.apply(this,arguments)||this}s(r,t);var n=r.prototype;return n.deploy=function(t){try{return Promise.resolve(this.postData("/v1/deployment/",t))}catch(t){return Promise.reject(t)}},n.getDeployment=function(t){try{return Promise.resolve(this.getData("/v1/deployment/"+t))}catch(t){return Promise.reject(t)}},n.authorizeDeployment=function(t){try{return Promise.resolve(this.postData("/v1/deployment/"+t+"/authorize",null))}catch(t){return Promise.reject(t)}},n.cancelDeployment=function(t){try{return Promise.resolve(this.postData("/v1/deployment/"+t+"/cancel",null))}catch(t){return Promise.reject(t)}},n.redeployDeployment=function(t){try{return Promise.resolve(this.postData("/v1/deployment/"+t+"/redeploy",null))}catch(t){return Promise.reject(t)}},n.defaultDeployment=function(t,r,n,o,i,a,u,s,c,l,m,p){try{var h=e.v4();return Promise.resolve(this.postData("/v1/deployment/",{organizationId:t,gitUrl:r,repoName:n,uniqueTopicId:h,configuration:{buildCommand:u,installCommand:s,workspace:c,publishDir:l,framework:m,nodeVersion:p},env:{},protocol:o,createDefaultWebhook:!0,provider:i,branch:a}))}catch(t){return Promise.reject(t)}},n.suggestionFramework=function(t,e,r,n,o){try{return Promise.resolve(this.getData("/v1/deployment/framework/suggestion?owner="+t+"&branch="+e+"&repo="+r+"&providerName="+n+"&root="+o))}catch(t){return Promise.reject(t)}},n.upload=function(t,e,r,n){try{var o=new a.default;return v(n,"./",o),Promise.resolve(this.postDataUpload("/v1/deployment/upload?protocol="+r+"&organization="+t+"&project="+e,o))}catch(t){return Promise.reject(t)}},r}(p),P=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}s(e,t);var r=e.prototype;return r.getDeploymentEnvironment=function(t){try{return Promise.resolve(this.getData("/v1/project/"+t+"/deployment-environments"))}catch(t){return Promise.reject(t)}},r.addDeploymentEnvironment=function(t,e,r,n){try{return Promise.resolve(this.postData("/v1/project/"+t+"/deployment-environments",{name:e,branches:r,protocol:n}))}catch(t){return Promise.reject(t)}},r.updateDeploymentEnvironment=function(t,e,r,n,o){try{return Promise.resolve(this.putData("/v1/project/"+t+"/deployment-environments/"+e,{name:r,branches:n,protocol:o}))}catch(t){return Promise.reject(t)}},r.deleteDeploymentEnvironmnet=function(t,e){try{return Promise.resolve(this.deleteData("/v1/project/"+t+"/deployment-environments/"+e))}catch(t){return Promise.reject(t)}},r.activateDeploymentEnvironment=function(t,e){try{return Promise.resolve(this.patchData("/v1/project/"+t+"/deployment-environments/"+e+"/activate",null))}catch(t){return Promise.reject(t)}},r.deactivateDeploymentEnvironment=function(t,e){try{return Promise.resolve(this.patchData("/v1/project/"+t+"/deployment-environments/"+e+"/deactivate",null))}catch(t){return Promise.reject(t)}},e}(p);function d(t,e){for(var r=t.users,n=0;n<r.length;n++)if(r[n]._id===e)return r[n];return"Invalid User"}var g,j=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}s(e,t);var r=e.prototype;return r.getOrganizationDetails=function(t){try{return Promise.resolve(this.getData("/v1/organization/"+t))}catch(t){return Promise.reject(t)}},r.getOrganizationUsers=function(t){try{return Promise.resolve(this.getData("/v1/organization/"+t).then(function(t){return t.users}))}catch(t){return Promise.reject(t)}},r.getOrganizationUserById=function(t,e){try{return Promise.resolve(this.getData("/v1/organization/"+t).then(function(t){return d(t,e)}))}catch(t){return Promise.reject(t)}},r.getUserPlatformProfile=function(t,e){try{return Promise.resolve(this.getData("/v1/organization/"+t).then(function(t){return d(t,e)}).then(function(t){return t.platformProfile}))}catch(t){return Promise.reject(t)}},r.getAllProviderProfilesOfUser=function(t,e){try{return Promise.resolve(this.getData("/v1/organization/"+t).then(function(t){return d(t,e)}).then(function(t){return t.providerProfiles}))}catch(t){return Promise.reject(t)}},r.getProviderProfileOfUserById=function(t,e,r){try{return Promise.resolve(this.getData("/v1/organization/"+t).then(function(t){return d(t,e)}).then(function(t){return function(t,e){for(var r=t.providerProfiles,n=0;n<r.length;n++)if(r[n].id===e)return r[n];return"Invalid Profile Id"}(t,r)}))}catch(t){return Promise.reject(t)}},r.getUserOrganisationsById=function(t,e){try{return Promise.resolve(this.getData("/v1/organization/"+t).then(function(t){return d(t,e)}).then(function(t){return t.organizations}))}catch(t){return Promise.reject(t)}},r.getWalletDetails=function(t){try{return Promise.resolve(this.getData("/v1/organization/"+t).then(function(t){return t.wallet}))}catch(t){return Promise.reject(t)}},r.getWalletNetworkDetails=function(t){try{return Promise.resolve(this.getData("/v1/organization/"+t).then(function(t){return t.wallet}).then(function(t){return t.networkDetails}))}catch(t){return Promise.reject(t)}},r.getWalletTokenDetails=function(t){try{return Promise.resolve(this.getData("/v1/organization/"+t).then(function(t){return t.wallet}).then(function(t){return t.tokenDetails}))}catch(t){return Promise.reject(t)}},r.getAllInvitedMembers=function(t){try{return Promise.resolve(this.getData("/v1/organization/"+t).then(function(t){return t.invitedMembers}))}catch(t){return Promise.reject(t)}},r.getInvitedMembersById=function(t,e){try{return Promise.resolve(this.getData("/v1/organization/"+t).then(function(t){return function(t,e){for(var r=t.invitedMembers,n=0;n<r.length;n++)if(r[n]._id===e)return r[n];return"Invited Id Not found"}(t,e)}))}catch(t){return Promise.reject(t)}},r.overdueStatus=function(t){try{return Promise.resolve(this.getData("/v1/organization/"+t+"/overdue"))}catch(t){return Promise.reject(t)}},e}(p),D=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}s(e,t);var r=e.prototype;return r.getProjectOrg=function(t){try{return Promise.resolve(this.getData("/v1/organization/"+t+"/projects"))}catch(t){return Promise.reject(t)}},r.getProjectCountByState=function(t,e){try{return Promise.resolve(this.getData(void 0!==e?"/v1/organization/"+t+"/projects/count?state="+e:"/v1/organization/"+t+"/projects/count"))}catch(t){return Promise.reject(t)}},r.getProjectCountUploadType=function(t,e){try{var r="/v1/organization/"+t+"/projects/count";if(void 0!==e){var n=e.toString();return Promise.resolve(this.getData("/v1/organization/"+t+"/projects/count?include_upload_type="+n))}return Promise.resolve(this.getData(r))}catch(t){return Promise.reject(t)}},e}(p),b=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}s(e,t);var r=e.prototype;return r.updateOrganizationProfileParams=function(t,e,r,n){try{return Promise.resolve(this.putData("/v1/organization/"+t,{name:e,username:r,image:n}))}catch(t){return Promise.reject(t)}},r.updateOrganizationProfile=function(t,e){try{return Promise.resolve(this.putData("/v1/organization/"+t,e))}catch(t){return Promise.reject(t)}},e}(p),z=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}s(e,t);var r=e.prototype;return r.getProjectDetailsById=function(t){try{return Promise.resolve(this.getData("/v1/project/"+t))}catch(t){return Promise.reject(t)}},r.getProjectDeploymentEnvironments=function(t){try{return Promise.resolve(this.getData("/v1/project/"+t).then(function(t){return t.deploymentEnvironments}))}catch(t){return Promise.reject(t)}},r.getConfigurationDetailsById=function(t){try{return Promise.resolve(this.getData("/v1/project/"+t).then(function(t){return t.configuration}))}catch(t){return Promise.reject(t)}},r.getAllDomainDetailsOfProject=function(t){try{return Promise.resolve(this.getData("/v1/project/"+t).then(function(t){return t.domains}))}catch(t){return Promise.reject(t)}},r.getDomainDetailsOfProjectByName=function(t,e){try{return Promise.resolve(this.getData("/v1/project/"+t).then(function(t){return function(t,e){for(var r=t.domains,n=0;n<r.length;n++)if(r[n].name===e)return r[n]}(t,e)}))}catch(t){return Promise.reject(t)}},e}(p),I=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}s(e,t);var r=e.prototype;return r.getDeploymentInfoByProjectId=function(t){try{return Promise.resolve(this.getData("/v1/project/"+t+"/deployments"))}catch(t){return Promise.reject(t)}},r.getDeploymentInfoByProjectIdLimit=function(t,e){try{return Promise.resolve(this.getData("/v1/project/"+t+"/deployments").then(function(t){return function(t,e){var r;if(e<t.length){for(var n;n<e;n++)r.push(t[n]);return r}return t}(t,e)}))}catch(t){return Promise.reject(t)}},r.getDeploymentInfoByProjectStatus=function(t,e){try{return Promise.resolve(this.getData("/v1/project/"+t+"/deployments").then(function(t){return function(t,e){for(var r,n;n<r.length;n++)t[n].status===e&&r.push(t[n]);return r}(t,e)}))}catch(t){return Promise.reject(t)}},r.getDeploymentCount=function(t){try{return Promise.resolve(this.getData("/v1/project/"+t+"/deployments/count"))}catch(t){return Promise.reject(t)}},e}(p),O=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e.prototype.updateState=function(t,e){try{return Promise.resolve(this.patchData("/v1/project/"+t+"/state",{state:e}))}catch(t){return Promise.reject(t)}},e}(p),U=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e.prototype.putConfiguration=function(t,e){try{return Promise.resolve(this.putData("/v1/project/"+t+"/configuration",e))}catch(t){return Promise.reject(t)}},e}(p),B=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e.prototype.getOrganisationId=function(){try{return Promise.resolve(this.getData("/v1/api-keys/scope"))}catch(t){return Promise.reject(t)}},e}(p),w=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}s(e,t);var r=e.prototype;return r.getInvitesById=function(t){try{return Promise.resolve(this.getData("/v1/organization/"+t+"/invites"))}catch(t){return Promise.reject(t)}},r.inviteMembers=function(t,e){try{return Promise.resolve(this.postData("/v1/organization/"+t+"/invites",{userEmail:e}))}catch(t){return Promise.reject(t)}},r.deleteInvite=function(t,e){try{return Promise.resolve(this.deleteData("/v1/organization/"+t+"/invites/"+e))}catch(t){return Promise.reject(t)}},e}(p),E=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}s(e,t);var r=e.prototype;return r.addEnvironmentVariables=function(t,e,r,n){try{return Promise.resolve(this.postData("/v1/project/"+t+"/environment-variables",{environmentVariables:[{name:e,value:r,deploymentEnvironments:n}]}))}catch(t){return Promise.reject(t)}},r.updateEnvironmentVariable=function(t,e,r,n,o){try{return Promise.resolve(this.putData("/v1/project/"+t+"/environment-variables/"+e,{environmentVariables:[{name:r,value:n,deploymentEnvironments:o}]}))}catch(t){return Promise.reject(t)}},r.deleteEnvironmentVariable=function(t,e){try{return Promise.resolve(this.deleteData("/v1/project/"+t+"/environment-variables/"+e))}catch(t){return Promise.reject(t)}},e}(p),S=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e}(p);g=S,[B,j,z,I,O,U,D,f,y,P,h,b,w,E].forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(e){Object.defineProperty(g.prototype,e,Object.getOwnPropertyDescriptor(t.prototype,e))})}),module.exports=S;
