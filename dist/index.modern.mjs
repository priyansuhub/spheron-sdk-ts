import t from"isomorphic-unfetch";import e from"axios";function a(){return a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},a.apply(this,arguments)}class n{constructor(t){this.apiKey=void 0,this.baseUrl=void 0,this.apiKey="Bearer "+t,this.baseUrl="https://api-v2.spheron.network"}async invoke(e,n){const r=`${this.baseUrl}${e}`,i=a({},n,{headers:{accept:"application/json",charset:"utf-8",authorization:this.apiKey}});return await t(r,i).then(async function(t){if(t.ok)return await t.json();throw new Error(t.statusText)})}async patchData(t,a){try{const{data:n}=await e.patch(`${this.baseUrl}${t}`,a,{headers:{accept:"application/json",charset:"utf-8",authorization:this.apiKey}});return n}catch(t){return t.message}}async putData(t,a){try{const{data:n}=await e.put(`${this.baseUrl}${t}`,a,{headers:{accept:"application/json",charset:"utf-8",authorization:this.apiKey}});return n}catch(t){return t.message}}async postData(t,a){try{const{data:n}=await e.post(`${this.baseUrl}${t}`,a,{headers:{accept:"application/json",charset:"utf-8",authorization:this.apiKey}});return n}catch(t){return t.message}}async deleteData(t){try{const{data:a}=await e.delete(`${this.baseUrl}${t}`,{headers:{accept:"application/json",charset:"utf-8",authorization:this.apiKey}});return a}catch(t){return t.message}}async getData(t){try{const{data:a}=await e.get(`${this.baseUrl}${t}`,{headers:{accept:"application/json",charset:"utf-8",authorization:this.apiKey}});return a}catch(t){return t.message}}async patchDataEmpty(t){try{const{data:a}=await e.patch(`${this.baseUrl}${t}`,{headers:{accept:"application/json",charset:"utf-8",authorization:this.apiKey}});return a}catch(t){return t.message}}async postDataEmpty(t){try{const{data:a}=await e.post(`${this.baseUrl}${t}`,{headers:{accept:"application/json",charset:"utf-8",authorization:this.apiKey}});return a}catch(t){return t.message}}}function r(t,e){const a=t.users;for(let t=0;t<a.length;t++)if(a[t]._id===e)return a[t];return"Invalid User"}class i extends n{}var o;o=i,[class extends n{async getOrganisationId(){return await this.invoke("/v1/api-keys/scope").then(t=>t.scope[0])}},class extends n{async getOrganizationDetails(t){return await this.invoke(`/v1/organization/${t}`)}async getOrganizationUsers(t){return await this.invoke(`/v1/organization/${t}`).then(t=>t.users)}async getOrganizationUserById(t,e){return await this.invoke(`/v1/organization/${t}`).then(t=>r(t,e))}async getUserPlatformProfile(t,e){return await this.invoke(`/v1/organization/${t}`).then(t=>r(t,e)).then(t=>t.platformProfile)}async getAllProviderProfilesOfUser(t,e){return await this.invoke(`/v1/organization/${t}`).then(t=>r(t,e)).then(t=>t.providerProfiles)}async getProviderProfileOfUserById(t,e,a){return await this.invoke(`/v1/organization/${t}`).then(t=>r(t,e)).then(t=>function(t,e){const a=t.providerProfiles;for(let t=0;t<a.length;t++)if(a[t].id===e)return a[t];return"Invalid Profile Id"}(t,a))}async getUserOrganisationsById(t,e){return await this.invoke(`/v1/organization/${t}`).then(t=>r(t,e)).then(t=>t.organizations)}async getWalletDetails(t){return await this.invoke(`/v1/organization/${t}`).then(t=>t.wallet)}async getWalletNetworkDetails(t){return await this.invoke(`/v1/organization/${t}`).then(t=>t.wallet).then(t=>t.networkDetails)}async getWalletTokenDetails(t){return await this.invoke(`/v1/organization/${t}`).then(t=>t.wallet).then(t=>t.tokenDetails)}async getAllInvitedMembers(t){return await this.invoke(`/v1/organization/${t}`).then(t=>t.invitedMembers)}async getInvitedMembersById(t,e){return await this.invoke(`/v1/organization/${t}`).then(t=>function(t,e){const a=t.invitedMembers;for(let t=0;t<a.length;t++)if(a[t]._id===e)return a[t];return"Invited Id Not found"}(t,e))}},class extends n{async getProjectDetailsById(t){return await this.invoke(`/v1/project/${t}`)}async getProjectDeploymentEnvironments(t){return await this.invoke(`/v1/project/${t}`).then(t=>t.deploymentEnvironments)}async getConfigurationDetailsById(t){return await this.invoke(`/v1/project/${t}`).then(t=>t.configuration)}async getAllDomainDetailsOfProject(t){return await this.invoke(`/v1/project/${t}`).then(t=>t.domains)}async getDomainDetailsOfProjectByName(t,e){return await this.invoke(`/v1/project/${t}`).then(t=>function(t,e){const a=t.domains;for(let t=0;t<a.length;t++)if(a[t].name===e)return a[t]}(t,e))}},class extends n{async getDeploymentInfoByProjectId(t){return await this.invoke(`/v1/project/${t}/deployments`)}async getDeploymentInfoByProjectIdLimit(t,e){return await this.invoke(`/v1/project/${t}/deployments`).then(t=>function(t,e){let a;if(e<t.length){for(let n;n<e;n++)a.push(t[n]);return a}return t}(t,e))}async getDeploymentInfoByProjectStatus(t,e){return await this.invoke(`/v1/project/${t}/deployments`).then(t=>function(t,e){let a,n;for(;n<a.length;n++)t[n].status===e&&a.push(t[n]);return a}(t,e))}async getDeploymentCount(t){return await this.invoke(`/v1/project/${t}/deployments/count`)}},class extends n{async updateState(t,e){const a={state:e};return await this.patchData(`/v1/project/${t}/state`,a)}},class extends n{async putConfiguration(t,e){return await this.putData(`/v1/project/${t}/configuration`,e)}},class extends n{async getProjectCount(t){return await this.invoke(`/v1/organization/${t}/projects/count`).then(t=>t.count)}},class extends n{},class extends n{async deployProject(t,e,a,n,r,i,o){let s;return s.organizationId=t,s.gitUrl=e,s.repoName=a,s.uniqueTopicId=n,s.configuration.buildCommand="string",s.configuration.installCommand="string",s.configuration.workspace="string",s.configuration.publishDir="string",s.configuration.framework="static",s.configuration.nodeVersion="V_12",s.env={},s.protocol=r,s.createDefaultWebhook=!0,s.provider=i,s.branch=o,await this.postData("/v1/deployment/",s)}async getDeployment(t){return await this.getData(`/v1/deployment/${t}`)}async authorizeDeployment(t){return await this.postDataEmpty(`/v1/deployment/${t}/authorize`)}async cancelDeployment(t){return await this.postDataEmpty(`/v1/deployment/${t}/authorize`)}},class extends n{async getDeploymentEnvironment(t){return await this.getData(`/v1/project/${t}/deployment-environments`)}async addDeploymentEnvironment(t,e,a,n){let r;return r.name=e,r.branches=a,r.protocol=n,await this.postData(`/v1/project/${t}/deployment-environments`,r)}async updateDeploymentEnvironmnet(t,e,a,n,r){let i;return i.name=a,i.branches=n,i.protocol=r,await this.putData(`/v1/project/${t}/deployment-environments/${e}`,i)}async deleteDeploymentEnvironmnet(t,e){return await this.deleteData(`/v1/project/${t}/deployment-environments/${e}`)}async activateDeploymentEnvironment(t,e){return await this.patchDataEmpty(`/v1/project/${t}/deployment-environments/${e}/activate`)}async deactivateDeploymentEnvironment(t,e){return await this.patchDataEmpty(`/v1/project/${t}/deployment-environments/${e}/deactivate`)}},class extends n{async addDomainByProjectId(t,e){return await this.postData(`/v1/project/${t}/domains`,e)}async updateDomainByProjectId(t,e,a){return await this.patchData(`/v1/project/${t}/domains/${e}`,a)}async deleteDomainByProjectId(t,e){return await this.deleteData(`/v1/project/${t}/domains/${e}`)}async verifyDomainByProjectId(t,e){return await this.patchDataEmpty(`/v1/project/${t}/domains/${e}/verify`)}}].forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(e=>{Object.defineProperty(o.prototype,e,Object.getOwnPropertyDescriptor(t.prototype,e))})});export{i as default};
